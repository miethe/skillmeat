{
  "template": {
    "name": "Python CLI",
    "description": "Python command-line application using Click framework with delegated architecture patterns",
    "collection_type": "context",
    "version": "1.0.0",
    "category": "cli-application"
  },
  "entities": [
    {
      "name": "CLAUDE.md",
      "type": "PROJECT_CONFIG",
      "path_pattern": "CLAUDE.md",
      "deploy_order": 1,
      "required": true,
      "content": "# {{PROJECT_NAME}}\n\n{{PROJECT_DESCRIPTION}}\n\n## Prime Directives\n\n| Directive | Implementation |\n|-----------|----------------|\n| **Delegate everything** | Opus reasons & orchestrates; subagents implement |\n| Token efficient | Symbol system, codebase-explorer |\n| Rapid iteration | PRD → code → deploy fast |\n| No over-architecture | YAGNI until proven |\n\n### Opus Delegation Principle\n\n**You are Opus. Tokens are expensive. You orchestrate; subagents execute.**\n\n- ✓ **Always** delegate implementation to specialized subagents\n- ✓ **Always** use codebase-explorer for pattern discovery\n- ✓ **Focus** on reasoning, analysis, planning, and orchestration\n\n## Documentation Policy\n\n**Reference**: `.claude/specs/doc-policy-spec.md`\n\n**Allowed**:\n- `/docs/` → User/dev/architecture docs (with frontmatter)\n- `.claude/progress/[prd]/` → ONE per phase (YAML+Markdown hybrid)\n- `.claude/worknotes/[prd]/` → ONE context.md per PRD (agent worknotes)\n\n## Architecture Overview\n\n```\n{{ARCHITECTURE_DESCRIPTION}}\n├── cli.py                  # Main CLI entry point (Click)\n├── core/                   # Business logic\n│   ├── __init__.py\n│   ├── models.py          # Data models\n│   └── operations.py      # Core operations\n├── commands/               # Click command groups\n│   ├── __init__.py\n│   ├── init.py            # init command\n│   ├── add.py             # add command\n│   └── list.py            # list command\n├── storage/                # File I/O\n│   ├── __init__.py\n│   ├── manifest.py        # Manifest file handling\n│   └── config.py          # Config file handling\n└── .claude/                # Project context\n    ├── specs/             # Specifications\n    ├── rules/             # Code patterns\n    └── progress/          # Phase tracking\n```\n\n## Agent Delegation\n\n| Task | Agent | Model |\n|------|-------|-------|\n| Backend Python | python-backend-engineer | Sonnet |\n| Documentation | documentation-writer | Haiku |\n| Exploration | codebase-explorer | Haiku |\n\n## Development Commands\n\n### Setup\n\n```bash\npip install -e \".[dev]\"          # Install in dev mode\nuv tool install --editable .     # Install with uv (recommended)\n```\n\n### Testing\n\n```bash\npytest -v --cov={{PROJECT_NAME}}               # Run tests with coverage\npytest tests/test_commands.py                  # Run specific test file\n```\n\n### Code Quality\n\n```bash\nblack {{PROJECT_NAME}}                         # Format code\nmypy {{PROJECT_NAME}} --ignore-missing-imports # Type checking\nflake8 {{PROJECT_NAME}}                        # Linting\n```\n\n### CLI Usage\n\n```bash\npython -m {{PROJECT_NAME}} init                # Initialize project\npython -m {{PROJECT_NAME}} add <source>       # Add artifact\npython -m {{PROJECT_NAME}} list                # List artifacts\npython -m {{PROJECT_NAME}} --help              # Show help\n```\n\n## Key Cross-Cutting Patterns\n\n### Python Version Compatibility\n\n```python\nimport sys\nif sys.version_info >= (3, 11):\n    import tomllib\nelse:\n    import tomli as tomllib\n```\n\n### Error Handling\n\n```python\n# CLI: Exit with sys.exit(1) on failure\n# Core: Raise domain-specific exceptions\n# Storage: Use context managers for safe file I/O\n```\n\n### Rich Output\n\n```python\nfrom rich.console import Console\n\nconsole = Console()\nconsole.print(\"[green]Success![/green]\")\nconsole.print_exception()  # Pretty print errors\n```\n\n---\n\n**Author**: {{AUTHOR}}\n**Created**: {{DATE}}\n**Version**: 1.0.0\n"
    },
    {
      "name": "doc-policy-spec.md",
      "type": "SPEC_FILE",
      "path_pattern": ".claude/specs/doc-policy-spec.md",
      "deploy_order": 2,
      "required": true,
      "content": "# Documentation Policy Spec\n\n**Version**: 1.0 (Compressed)\n**Purpose**: Documentation rules and patterns\n**Token Target**: ~250 lines\n**Format**: Dense, structured, AI-optimized\n\n---\n\n## Core Principle\n\n**Create documentation ONLY when**:\n\n1. Explicitly tasked (PRD, plan, request)\n2. Absolutely necessary (essential info)\n3. Fits allowed bucket (see below)\n\n**Rule**: More docs ≠ better. When uncertain → don't create.\n\n---\n\n## Strictly Prohibited\n\n| ✗ Never Create | Why | Alternative |\n|----------------|-----|-------------|\n| Debugging summaries | Becomes outdated | Git commit message |\n| Multiple progress/phase | Creates sprawl | ONE per phase |\n| Session notes as docs | Temporary context | Keep in worknotes |\n| Daily/weekly reports | Documentation debt | Git commits + phase progress |\n\n---\n\n## Allowed Documentation Buckets\n\n### Required Buckets\n\n| Bucket | Purpose | Location | Format |\n|--------|---------|----------|--------|\n| **README (module)** | What this package does | `<module>/README.md` | Markdown |\n| **API Documentation** | Function/class docs | In-code (docstrings) | Docstring format |\n| **Setup Guides** | Installation, config | `/docs/development/` | Markdown |\n\n### Optional Buckets\n\n| Bucket | Purpose | Location |\n|--------|---------|----------|\n| **CLI Reference** | Command documentation | `/docs/cli/` |\n| **How-To Guides** | Task instructions | `/docs/guides/` |\n\n---\n\n## Tracking Documentation (Allowed)\n\n### Progress Files (One Per Phase)\n\n**Location**: `.claude/progress/[prd-name]/phase-[N]-progress.md`\n\n### Context Files (One Per PRD)\n\n**Location**: `.claude/worknotes/[prd-name]/context.md`\n\n### Monthly Logs (One Per Month)\n\n**Bug Fixes**: `.claude/worknotes/fixes/bug-fixes-tracking-MM-YY.md`\n\n---\n\n## Decision Tree\n\n```\nShould I write documentation?\n  ├─ Is it explicitly tasked? → YES → Create it\n  ├─ Is it essential info users/devs need? → YES → Create it\n  ├─ Does it fit an allowed bucket? → YES → Create it\n  └─ Will it become outdated? → YES → Don't create, use git commits instead\n```\n\n---\n\n**Version**: 1.0\n**Last Updated**: {{DATE}}\n"
    },
    {
      "name": "commands.md",
      "type": "RULE_FILE",
      "path_pattern": ".claude/rules/cli/commands.md",
      "deploy_order": 3,
      "required": false,
      "content": "# Click Command Patterns\n\n<!-- Path Scope: {{PROJECT_NAME}}/commands/**/*.py -->\n\nClick framework patterns for {{PROJECT_NAME}} CLI commands.\n\n## Command Structure\n\n```python\nimport click\n\n@click.command()\n@click.argument('name')\n@click.option('--verbose', '-v', is_flag=True, help='Verbose output')\n@click.option('--config', type=click.Path(exists=True), help='Config file')\ndef my_command(name: str, verbose: bool, config: Optional[str]) -> None:\n    \"\"\"Brief command description.\"\"\"\n    click.echo(f'Processing {name}...')\n\nif __name__ == '__main__':\n    my_command()\n```\n\n## Command Groups\n\n```python\n@click.group()\ndef cli() -> None:\n    \"\"\"Main CLI group.\"\"\"\n    pass\n\n@cli.command()\ndef init() -> None:\n    \"\"\"Initialize project.\"\"\"\n    pass\n\n@cli.command()\n@click.argument('source')\ndef add(source: str) -> None:\n    \"\"\"Add artifact from source.\"\"\"\n    pass\n```\n\n## Error Handling\n\n```python\ntry:\n    result = operation(data)\n    click.echo(f'[green]Success![/green]')\n    click.echo(result)\nexcept ValueError as e:\n    click.echo(click.style(f'Error: {e}', fg='red'), err=True)\n    raise SystemExit(1)\nexcept Exception as e:\n    click.echo(click.style(f'Fatal: {e}', fg='red'), err=True)\n    raise SystemExit(1)\n```\n\n## Output Formatting\n\n```python\nfrom rich.console import Console\n\nconsole = Console()\n\n# Progress indicator\nwith console.status('[bold green]Processing...'):\n    result = do_work()\n\n# Table output\nfrom rich.table import Table\ntable = Table(title=\"Items\")\ntable.add_column(\"ID\", style=\"cyan\")\ntable.add_column(\"Name\", style=\"magenta\")\nfor item in items:\n    table.add_row(item.id, item.name)\nconsole.print(table)\n```\n\n---\n\n**Path Scope**: `{{PROJECT_NAME}}/commands/**/*.py`\n"
    },
    {
      "name": "cli-patterns.md",
      "type": "CONTEXT_FILE",
      "path_pattern": ".claude/context/cli-patterns.md",
      "deploy_order": 4,
      "required": false,
      "content": "---\ntitle: CLI Best Practices\npurpose: Reference patterns for Python CLI development\nreferences:\n  - {{PROJECT_NAME}}/commands\n  - {{PROJECT_NAME}}/cli.py\nlast_verified: {{DATE}}\n---\n\n# CLI Best Practices\n\nReference patterns for Python CLI development in {{PROJECT_NAME}}.\n\n## Command Definition\n\n```python\n@click.command()\n@click.argument('resource_id')\n@click.option('--verbose', '-v', is_flag=True, help='Verbose output')\n@click.option('--output', '-o', type=click.File('w'), help='Output file')\ndef my_command(resource_id: str, verbose: bool, output: Any) -> None:\n    \"\"\"Do something with resource.\"\"\"\n    if verbose:\n        click.echo('Verbose mode enabled')\n    \n    result = process_resource(resource_id)\n    \n    if output:\n        output.write(str(result))\n    else:\n        click.echo(result)\n```\n\n## Error Handling\n\n```python\ntry:\n    result = operation()\nexcept ValueError as e:\n    click.echo(click.style(f'Error: {e}', fg='red'), err=True)\n    raise SystemExit(1)\nexcept Exception as e:\n    click.echo(click.style(f'Fatal: {e}', fg='red'), err=True)\n    raise SystemExit(1)\n```\n\n## Output Patterns\n\n```python\n# Simple text\nclick.echo(\"Processing...\")\n\n# Colored output\nclick.echo(click.style(\"Success!\", fg='green'))\nclick.echo(click.style(\"Error!\", fg='red'), err=True)\n\n# Progress\nwith click.progressbar(items, label='Processing') as bar:\n    for item in bar:\n        process(item)\n```\n\n---\n\n**Token Cost**: ~800 (reference only)\n"
    }
  ]
}
