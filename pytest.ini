[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    -v
    --strict-markers
    --tb=short
    --maxfail=10
# Coverage options (use --cov=skillmeat --cov-report=xml --cov-report=html when needed)
# These are included by default in CI but optional for local development
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (slower, may use external resources)
    e2e: End-to-end tests (full system tests)
    slow: Slow tests (>1s execution time)
    api: API endpoint tests
    marketplace: Marketplace integration tests
    mcp: MCP server management tests
    sharing: Bundle sharing and publishing tests
    compliance: Compliance and security validation tests
    security: Security tests (authentication, authorization, encryption)
    cli: CLI command tests
    core: Core functionality tests (collection, deployment, sync)
    sources: Source provider tests (GitHub, local)
    storage: Storage layer tests (manifest, lockfile)
    web: Web interface backend tests
    performance: Performance and benchmark tests

# Coverage minimum thresholds
# Target: 75% overall, critical paths 100%
# These will be enforced in CI/CD

# Pytest timeouts
timeout = 300
timeout_method = thread

# Pytest output
console_output_style = progress

# Pytest logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Pytest warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning

# Pytest xfail behavior
xfail_strict = true
